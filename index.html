<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Primary Meta Tags -->
    <title>Oneliner - Free Online HTML, CSS, JavaScript & JSON Minifier | Code Beautifier | Base64 Encoder/Decoder Tool</title>
    <meta name="title" content="Oneliner - Free Online HTML, CSS, JavaScript & JSON Minifier | Code Beautifier | Base64 Encoder/Decoder Tool">
    <meta name="description" content="Professional online code minifier and beautifier for HTML, CSS, JavaScript & JSON with Base64 encoder/decoder for text and images. Free developer tool with drag-and-drop support, offline PWA capability, dark mode, and real-time statistics. No installation required. Works completely offline.">
    <meta name="keywords" content="HTML minifier, CSS minifier, JavaScript minifier, JSON minifier, base64 encoder, base64 decoder, image to base64, code beautifier, code formatter, online minifier, free minifier, developer tools, code compression, HTML formatter, CSS formatter, JavaScript formatter, JSON formatter, PWA, offline tool, code optimizer">
    <meta name="author" content="Oneliner">
    <meta name="robots" content="index, follow">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="theme-color" content="#2563eb">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://taufiksoleh.github.io/oneliner/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://taufiksoleh.github.io/oneliner/">
    <meta property="og:title" content="Oneliner - Free Online HTML, CSS, JavaScript & JSON Minifier | Base64 Encoder/Decoder">
    <meta property="og:description" content="Professional online code minifier and beautifier for HTML, CSS, JavaScript & JSON with Base64 encoder/decoder for text and images. Free developer tool with drag-and-drop support, offline PWA capability, dark mode, and real-time statistics.">
    <meta property="og:image" content="https://taufiksoleh.github.io/oneliner/icon.svg">
    <meta property="og:image:alt" content="Oneliner - Code Minifier and Beautifier Tool">
    <meta property="og:site_name" content="Oneliner">
    <meta property="og:locale" content="en_US">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://taufiksoleh.github.io/oneliner/">
    <meta property="twitter:title" content="Oneliner - Free Online HTML, CSS, JavaScript & JSON Minifier | Base64 Encoder/Decoder">
    <meta property="twitter:description" content="Professional online code minifier and beautifier for HTML, CSS, JavaScript & JSON with Base64 encoder/decoder for text and images. Free developer tool with drag-and-drop support, offline PWA capability, dark mode, and real-time statistics.">
    <meta property="twitter:image" content="https://taufiksoleh.github.io/oneliner/icon.svg">

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Oneliner">

    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Oneliner",
        "alternateName": "Oneliner Code Minifier",
        "url": "https://taufiksoleh.github.io/oneliner/",
        "description": "Professional online code minifier and beautifier for HTML, CSS, JavaScript & JSON with Base64 encoder/decoder for text and images. Free developer tool with drag-and-drop support, offline PWA capability, dark mode, and real-time statistics.",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "Any",
        "browserRequirements": "Requires JavaScript. Requires HTML5.",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "HTML Minification and Beautification",
            "CSS Minification and Beautification",
            "JavaScript Minification and Beautification",
            "JSON Minification and Beautification",
            "Base64 Encoder and Decoder for Text",
            "Base64 Encoder and Decoder for Images",
            "Drag and Drop File Upload",
            "Offline PWA Support",
            "Dark Mode",
            "Real-time Statistics",
            "Copy to Clipboard",
            "File Download",
            "Keyboard Shortcuts"
        ],
        "screenshot": "https://taufiksoleh.github.io/oneliner/icon.svg",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "5",
            "ratingCount": "1"
        },
        "author": {
            "@type": "Organization",
            "name": "Oneliner"
        }
    }
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --primary-light: #60a5fa;
            --secondary: #8b5cf6;
            --accent: #f59e0b;
            --success: #059669;
            --danger: #dc2626;
            --warning: #d97706;

            --bg-body: #f8fafc;
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --container-bg: #ffffff;
            --card-bg: #ffffff;

            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;

            --border: #e2e8f0;
            --border-hover: #cbd5e1;

            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);

            --radius-sm: 6px;
            --radius: 10px;
            --radius-lg: 14px;
            --radius-xl: 18px;

            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body.dark-mode {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --primary-light: #60a5fa;
            --secondary: #a78bfa;

            --bg-body: #0f172a;
            --bg-gradient: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            --container-bg: #1e293b;
            --card-bg: #1e293b;

            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;

            --border: #334155;
            --border-hover: #475569;

            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-body);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 2rem;
            transition: background 0.3s ease, color 0.3s ease;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 300px;
            background: var(--bg-gradient);
            z-index: -1;
            opacity: 0.05;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            background: var(--container-bg);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            padding: 2.5rem;
            transition: var(--transition);
            border: 1px solid var(--border);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2.5rem;
            flex-wrap: wrap;
            gap: 1.5rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid var(--border);
        }

        .header-content h1 {
            color: var(--text-primary);
            font-size: 2.25rem;
            font-weight: 700;
            letter-spacing: -0.025em;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-top: 0.5rem;
            transition: color 0.3s ease;
            font-weight: 400;
        }

        .dark-mode-toggle {
            background: var(--card-bg);
            border: 1.5px solid var(--border);
            color: var(--text-primary);
            padding: 0.625rem 1.25rem;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: var(--shadow-sm);
        }

        .dark-mode-toggle:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
            border-color: var(--border-hover);
            background: var(--bg-body);
        }

        .dark-mode-toggle:active {
            transform: translateY(0);
        }

        .tabs {
            display: inline-flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            padding: 0.375rem;
            background: var(--bg-body);
            border-radius: var(--radius-lg);
            border: 1.5px solid var(--border);
            flex-wrap: wrap;
        }

        .tab {
            padding: 0.625rem 1.5rem;
            background: transparent;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-secondary);
            transition: var(--transition);
            position: relative;
        }

        .tab.active {
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .tab:hover:not(.active) {
            background: var(--border);
            color: var(--text-primary);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .editor-section {
            margin-bottom: 1.5rem;
        }

        .editor-section label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            font-size: 0.9375rem;
            transition: color 0.3s ease;
            letter-spacing: -0.01em;
        }

        .file-upload-area {
            border: 2px dashed var(--border);
            border-radius: var(--radius-lg);
            padding: 2rem;
            text-align: center;
            margin-bottom: 1.25rem;
            background: var(--bg-body);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .file-upload-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--primary);
            opacity: 0;
            transition: var(--transition);
            z-index: 0;
        }

        .file-upload-area.dragover::before {
            opacity: 0.08;
        }

        .file-upload-area.dragover {
            border-color: var(--primary);
            transform: scale(0.99);
        }

        .file-upload-area:hover {
            border-color: var(--primary-light);
            box-shadow: var(--shadow);
        }

        .file-upload-area p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            transition: color 0.3s ease;
            font-size: 0.9375rem;
            position: relative;
            z-index: 1;
        }

        .file-input-btn {
            background: var(--card-bg);
            color: var(--text-primary);
            border: 1.5px solid var(--border);
            padding: 0.5rem 1.25rem;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.875rem;
            transition: var(--transition);
            position: relative;
            z-index: 1;
        }

        .file-input-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        textarea {
            width: 100%;
            min-height: 280px;
            padding: 1rem;
            border: 1.5px solid var(--border);
            border-radius: var(--radius-lg);
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.6;
            resize: vertical;
            transition: var(--transition);
            background: var(--card-bg);
            color: var(--text-primary);
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        textarea::placeholder {
            color: var(--text-muted);
        }

        .code-wrapper {
            position: relative;
            width: 100%;
        }

        .code-wrapper pre {
            margin: 0;
            width: 100%;
            min-height: 280px;
            border: 1.5px solid var(--border);
            border-radius: var(--radius-lg);
            font-size: 0.875rem;
            line-height: 1.6;
            overflow: auto;
        }

        .code-wrapper pre code {
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
        }

        .output-hidden {
            display: none;
        }

        .button-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
            gap: 0.875rem;
            margin: 1.5rem 0;
        }

        button {
            padding: 0.875rem 1.5rem;
            font-size: 0.9375rem;
            font-weight: 600;
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: var(--transition);
            -webkit-tap-highlight-color: transparent;
            position: relative;
            overflow: hidden;
            font-family: inherit;
        }

        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.2);
            opacity: 0;
            transition: var(--transition);
        }

        button:hover::before {
            opacity: 1;
        }

        .btn-minify {
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-minify:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            background: var(--primary-dark);
        }

        .btn-beautify {
            background: var(--secondary);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-beautify:hover {
            background: #7c3aed;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-copy {
            background: var(--success);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-copy:hover {
            background: #047857;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-download {
            background: var(--warning);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-download:hover {
            background: #b45309;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-clear {
            background: var(--danger);
            color: white;
            box-shadow: var(--shadow);
        }

        .btn-clear:hover {
            background: #b91c1c;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        button:active {
            transform: translateY(0) scale(0.98);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.25rem;
            margin: 1.5rem 0;
            padding: 1.5rem;
            background: var(--bg-body);
            border-radius: var(--radius-lg);
            border: 1.5px solid var(--border);
            transition: background 0.3s ease;
        }

        .stat-item {
            text-align: center;
            padding: 0.75rem;
            border-radius: var(--radius);
            transition: var(--transition);
        }

        .stat-item:hover {
            background: var(--card-bg);
        }

        .stat-label {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            transition: color 0.3s ease;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .stat-value {
            font-size: 1.625rem;
            font-weight: 700;
            color: var(--primary);
            letter-spacing: -0.02em;
        }

        .notification {
            position: fixed;
            top: 1.5rem;
            right: 1.5rem;
            padding: 1rem 1.5rem;
            background: var(--success);
            color: white;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            opacity: 0;
            transform: translateX(400px) scale(0.9);
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 1000;
            max-width: 320px;
            font-weight: 500;
            font-size: 0.9375rem;
            backdrop-filter: blur(10px);
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0) scale(1);
        }

        .features {
            margin-top: 2rem;
            padding: 1.75rem;
            background: var(--bg-body);
            border-radius: var(--radius-lg);
            transition: background 0.3s ease;
            border: 1.5px solid var(--border);
        }

        .features h3 {
            color: var(--text-primary);
            margin-bottom: 1.25rem;
            transition: color 0.3s ease;
            font-size: 1.125rem;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .features ul {
            list-style: none;
            color: var(--text-secondary);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 0.75rem;
        }

        .features li {
            padding: 0.625rem 0;
            padding-left: 1.75rem;
            position: relative;
            transition: var(--transition);
            border-radius: var(--radius);
            font-size: 0.9375rem;
        }

        .features li:hover {
            padding-left: 2rem;
            background: var(--card-bg);
            padding-right: 0.625rem;
        }

        .features li:before {
            content: "‚úì";
            position: absolute;
            left: 0.5rem;
            color: var(--success);
            font-weight: bold;
            font-size: 1.125rem;
        }

        .features li strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .keyboard-shortcuts {
            margin-top: 1.5rem;
            padding: 1.25rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: var(--radius-lg);
            font-size: 0.9375rem;
            color: white;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-md);
        }

        .keyboard-shortcuts strong {
            color: white;
            background: rgba(255, 255, 255, 0.2);
            padding: 0.25rem 0.625rem;
            border-radius: var(--radius-sm);
            font-weight: 600;
            display: inline-block;
            margin: 0 0.25rem;
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            body::before {
                height: 200px;
            }

            .container {
                padding: 1.5rem;
                border-radius: var(--radius-lg);
            }

            .header {
                flex-direction: column;
                text-align: center;
                padding-bottom: 1.5rem;
                margin-bottom: 1.5rem;
            }

            .header-content h1 {
                font-size: 1.75rem;
                justify-content: center;
            }

            .subtitle {
                font-size: 0.9375rem;
            }

            .dark-mode-toggle {
                width: 100%;
                justify-content: center;
            }

            .tabs {
                width: 100%;
                padding: 0.25rem;
            }

            .tab {
                flex: 1;
                min-width: 70px;
                padding: 0.625rem 0.75rem;
                font-size: 0.875rem;
            }

            .button-group {
                grid-template-columns: 1fr;
            }

            textarea {
                min-height: 200px;
                font-size: 0.8125rem;
            }

            .stats {
                grid-template-columns: 1fr;
                gap: 0.875rem;
            }

            .stat-value {
                font-size: 1.5rem;
            }

            .notification {
                left: 1rem;
                right: 1rem;
                max-width: calc(100% - 2rem);
            }

            .features ul {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .header-content h1 {
                font-size: 1.5rem;
            }

            .tab {
                font-size: 0.8125rem;
                padding: 0.5rem 0.625rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>üöÄ Oneliner</h1>
                <p class="subtitle">Professional HTML, CSS, JavaScript & JSON minifier for developers</p>
            </div>
            <button class="dark-mode-toggle" onclick="toggleDarkMode()">
                <span id="themeIcon">üåô</span>
                <span id="themeText">Dark</span>
            </button>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('html')">HTML</button>
            <button class="tab" onclick="switchTab('css')">CSS</button>
            <button class="tab" onclick="switchTab('js')">JavaScript</button>
            <button class="tab" onclick="switchTab('json')">JSON</button>
            <button class="tab" onclick="switchTab('base64')">Base64</button>
        </div>

        <!-- HTML Tab -->
        <div class="tab-content active" id="html-content">
            <div class="file-upload-area" id="htmlUploadArea">
                <p>üìÅ Drag & drop HTML file here or click to browse</p>
                <input type="file" id="htmlFileInput" accept=".html,.htm" style="display: none;" onchange="handleFileSelect(event, 'html')">
                <button class="file-input-btn" onclick="document.getElementById('htmlFileInput').click()">Choose File</button>
            </div>

            <div class="editor-section">
                <label for="htmlInput">Input HTML:</label>
                <textarea id="htmlInput" placeholder="Paste your HTML code here..."></textarea>
            </div>

            <div class="button-group">
                <button class="btn-minify" onclick="minify('html')">Minify HTML</button>
                <button class="btn-beautify" onclick="beautify('html')">Beautify HTML</button>
                <button class="btn-copy" onclick="copyOutput('html')">Copy Output</button>
                <button class="btn-download" onclick="downloadFile('html')">Download</button>
                <button class="btn-clear" onclick="clearAll('html')">Clear All</button>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">Original Size</div>
                    <div class="stat-value" id="htmlOriginalSize">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Minified Size</div>
                    <div class="stat-value" id="htmlMinifiedSize">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Saved</div>
                    <div class="stat-value" id="htmlSavedSize">0%</div>
                </div>
            </div>

            <div class="editor-section">
                <label for="htmlOutput">Minified Output:</label>
                <textarea id="htmlOutput" readonly placeholder="Minified HTML will appear here..."></textarea>
            </div>
        </div>

        <!-- CSS Tab -->
        <div class="tab-content" id="css-content">
            <div class="file-upload-area" id="cssUploadArea">
                <p>üìÅ Drag & drop CSS file here or click to browse</p>
                <input type="file" id="cssFileInput" accept=".css" style="display: none;" onchange="handleFileSelect(event, 'css')">
                <button class="file-input-btn" onclick="document.getElementById('cssFileInput').click()">Choose File</button>
            </div>

            <div class="editor-section">
                <label for="cssInput">Input CSS:</label>
                <textarea id="cssInput" placeholder="Paste your CSS code here..."></textarea>
            </div>

            <div class="button-group">
                <button class="btn-minify" onclick="minify('css')">Minify CSS</button>
                <button class="btn-beautify" onclick="beautify('css')">Beautify CSS</button>
                <button class="btn-copy" onclick="copyOutput('css')">Copy Output</button>
                <button class="btn-download" onclick="downloadFile('css')">Download</button>
                <button class="btn-clear" onclick="clearAll('css')">Clear All</button>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">Original Size</div>
                    <div class="stat-value" id="cssOriginalSize">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Minified Size</div>
                    <div class="stat-value" id="cssMinifiedSize">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Saved</div>
                    <div class="stat-value" id="cssSavedSize">0%</div>
                </div>
            </div>

            <div class="editor-section">
                <label for="cssOutput">Minified Output:</label>
                <textarea id="cssOutput" readonly placeholder="Minified CSS will appear here..."></textarea>
            </div>
        </div>

        <!-- JavaScript Tab -->
        <div class="tab-content" id="js-content">
            <div class="file-upload-area" id="jsUploadArea">
                <p>üìÅ Drag & drop JavaScript file here or click to browse</p>
                <input type="file" id="jsFileInput" accept=".js" style="display: none;" onchange="handleFileSelect(event, 'js')">
                <button class="file-input-btn" onclick="document.getElementById('jsFileInput').click()">Choose File</button>
            </div>

            <div class="editor-section">
                <label for="jsInput">Input JavaScript:</label>
                <textarea id="jsInput" placeholder="Paste your JavaScript code here..."></textarea>
            </div>

            <div class="button-group">
                <button class="btn-minify" onclick="minify('js')">Minify JavaScript</button>
                <button class="btn-beautify" onclick="beautify('js')">Beautify JavaScript</button>
                <button class="btn-copy" onclick="copyOutput('js')">Copy Output</button>
                <button class="btn-download" onclick="downloadFile('js')">Download</button>
                <button class="btn-clear" onclick="clearAll('js')">Clear All</button>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">Original Size</div>
                    <div class="stat-value" id="jsOriginalSize">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Minified Size</div>
                    <div class="stat-value" id="jsMinifiedSize">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Saved</div>
                    <div class="stat-value" id="jsSavedSize">0%</div>
                </div>
            </div>

            <div class="editor-section">
                <label for="jsOutput">Minified Output:</label>
                <textarea id="jsOutput" readonly placeholder="Minified JavaScript will appear here..."></textarea>
            </div>
        </div>

        <!-- JSON Tab -->
        <div class="tab-content" id="json-content">
            <div class="file-upload-area" id="jsonUploadArea">
                <p>üìÅ Drag & drop JSON file here or click to browse</p>
                <input type="file" id="jsonFileInput" accept=".json" style="display: none;" onchange="handleFileSelect(event, 'json')">
                <button class="file-input-btn" onclick="document.getElementById('jsonFileInput').click()">Choose File</button>
            </div>

            <div class="editor-section">
                <label for="jsonInput">Input JSON:</label>
                <textarea id="jsonInput" placeholder="Paste your JSON code here..."></textarea>
            </div>

            <div class="button-group">
                <button class="btn-minify" onclick="minify('json')">Minify JSON</button>
                <button class="btn-beautify" onclick="beautify('json')">Beautify JSON</button>
                <button class="btn-copy" onclick="copyOutput('json')">Copy Output</button>
                <button class="btn-download" onclick="downloadFile('json')">Download</button>
                <button class="btn-clear" onclick="clearAll('json')">Clear All</button>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">Original Size</div>
                    <div class="stat-value" id="jsonOriginalSize">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Minified Size</div>
                    <div class="stat-value" id="jsonMinifiedSize">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Saved</div>
                    <div class="stat-value" id="jsonSavedSize">0%</div>
                </div>
            </div>

            <div class="editor-section">
                <label for="jsonOutput">Minified Output:</label>
                <textarea id="jsonOutput" readonly placeholder="Minified JSON will appear here..."></textarea>
            </div>
        </div>

        <!-- Base64 Tab -->
        <div class="tab-content" id="base64-content">
            <div class="editor-section">
                <h3 style="color: var(--text-primary); margin-bottom: 1.5rem; font-size: 1.25rem; font-weight: 700;">Text Encode/Decode</h3>

                <label for="base64TextInput">Input Text:</label>
                <textarea id="base64TextInput" placeholder="Enter text to encode or base64 to decode..."></textarea>
            </div>

            <div class="button-group">
                <button class="btn-minify" onclick="encodeBase64Text()">Encode to Base64</button>
                <button class="btn-beautify" onclick="decodeBase64Text()">Decode from Base64</button>
                <button class="btn-copy" onclick="copyOutput('base64Text')">Copy Output</button>
                <button class="btn-clear" onclick="clearAll('base64Text')">Clear All</button>
            </div>

            <div class="editor-section">
                <label for="base64TextOutput">Output:</label>
                <textarea id="base64TextOutput" readonly placeholder="Encoded/decoded text will appear here..."></textarea>
            </div>

            <hr style="border: none; border-top: 2px solid var(--border); margin: 2.5rem 0;">

            <div class="editor-section">
                <h3 style="color: var(--text-primary); margin-bottom: 1.5rem; font-size: 1.25rem; font-weight: 700;">Image Encode/Decode</h3>

                <div class="file-upload-area" id="base64ImageUploadArea">
                    <p>üìÅ Drag & drop image file here or click to browse</p>
                    <input type="file" id="base64ImageFileInput" accept="image/*" style="display: none;" onchange="handleImageSelect(event)">
                    <button class="file-input-btn" onclick="document.getElementById('base64ImageFileInput').click()">Choose Image</button>
                </div>

                <div id="imagePreviewContainer" style="display: none; margin-bottom: 1.5rem; text-align: center;">
                    <label>Image Preview:</label>
                    <div style="margin-top: 0.75rem; padding: 1rem; background: var(--bg-body); border-radius: var(--radius-lg); border: 1.5px solid var(--border);">
                        <img id="imagePreview" style="max-width: 100%; max-height: 300px; border-radius: var(--radius);" />
                    </div>
                </div>

                <label for="base64ImageInput">Base64 String:</label>
                <textarea id="base64ImageInput" placeholder="Paste base64 image string here to decode or it will appear here after encoding..."></textarea>
            </div>

            <div class="button-group">
                <button class="btn-beautify" onclick="decodeBase64Image()">Decode Base64 to Image</button>
                <button class="btn-copy" onclick="copyOutput('base64Image')">Copy Base64</button>
                <button class="btn-download" onclick="downloadBase64Image()">Download Image</button>
                <button class="btn-clear" onclick="clearAll('base64Image')">Clear All</button>
            </div>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">Base64 Size</div>
                    <div class="stat-value" id="base64Size">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Image Type</div>
                    <div class="stat-value" id="imageType" style="font-size: 1.125rem;">-</div>
                </div>
            </div>
        </div>

        <div class="features">
            <h3>‚ú® Features:</h3>
            <ul>
                <li><strong>Minify & Beautify:</strong> Compress or format HTML, CSS, JavaScript, and JSON</li>
                <li><strong>Base64 Encoder/Decoder:</strong> Encode and decode text and images to/from Base64</li>
                <li><strong>Two-Way Processing:</strong> Minify code to save space or beautify to improve readability</li>
                <li><strong>Works Offline:</strong> Full PWA support - install and use without internet</li>
                <li><strong>File Upload:</strong> Drag & drop or browse to upload files and images</li>
                <li><strong>File Download:</strong> Save processed output directly</li>
                <li><strong>Dark Mode:</strong> Eye-friendly dark theme with persistence</li>
                <li><strong>Statistics:</strong> Real-time size comparison and change percentage</li>
                <li><strong>Copy to Clipboard:</strong> One-click copy functionality</li>
                <li><strong>Keyboard Shortcuts:</strong> Ctrl/Cmd+Enter to minify, Ctrl/Cmd+K to clear</li>
            </ul>
        </div>

        <div class="keyboard-shortcuts">
            <strong>‚å®Ô∏è Keyboard Shortcuts:</strong>
            <strong>Ctrl/Cmd+Enter</strong> - Minify |
            <strong>Ctrl/Cmd+K</strong> - Clear All
        </div>
    </div>

    <div class="notification" id="notification">Success!</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script>
        // State management
        let currentTab = 'html';

        // Initialize on load
        window.addEventListener('load', () => {
            loadPreferences();
            loadSampleCode();
            setupDragAndDrop();
            registerServiceWorker();
        });

        // Register service worker for PWA
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('Service Worker registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Service Worker registration failed:', error);
                    });
            }
        }

        // Tab switching
        function switchTab(tab) {
            // Save current tab preference
            currentTab = tab;
            localStorage.setItem('currentTab', tab);

            // Update tab buttons
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            // Update content
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(`${tab}-content`).classList.add('active');
        }

        // Dark mode toggle
        function toggleDarkMode() {
            const body = document.body;
            const isDark = body.classList.toggle('dark-mode');

            // Update icon and text
            document.getElementById('themeIcon').textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
            document.getElementById('themeText').textContent = isDark ? 'Light' : 'Dark';

            // Save preference
            localStorage.setItem('darkMode', isDark);

            showNotification(isDark ? 'Dark mode enabled' : 'Light mode enabled', '#10b981');
        }

        // Load preferences
        function loadPreferences() {
            // Load dark mode preference
            const darkMode = localStorage.getItem('darkMode') === 'true';
            if (darkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('themeIcon').textContent = '‚òÄÔ∏è';
                document.getElementById('themeText').textContent = 'Light';
            }

            // Load last tab
            const lastTab = localStorage.getItem('currentTab') || 'html';
            if (lastTab !== 'html') {
                currentTab = lastTab;
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab').forEach(t => {
                    if (t.textContent.toLowerCase() === lastTab ||
                        (lastTab === 'js' && t.textContent === 'JavaScript') ||
                        (lastTab === 'base64' && t.textContent === 'Base64')) {
                        t.classList.add('active');
                    }
                });
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.getElementById(`${lastTab}-content`).classList.add('active');
            }
        }

        // HTML Minifier
        function minifyHTML(input) {
            let minified = input;

            // Store preserved content (pre, textarea, script tags)
            const preserved = [];
            const preserveTags = ['pre', 'textarea', 'script', 'code'];

            preserveTags.forEach(tag => {
                const regex = new RegExp(`<${tag}[^>]*>[\\s\\S]*?<\\/${tag}>`, 'gi');
                minified = minified.replace(regex, match => {
                    preserved.push(match);
                    return `___PRESERVED_${preserved.length - 1}___`;
                });
            });

            // Remove HTML comments (but preserve conditional comments)
            minified = minified.replace(/<!--(?!\[if\s)(?!<!)[^\[][\s\S]*?-->/g, '');

            // First, normalize all whitespace to prevent word merging
            // Replace all newlines and multiple whitespace with a single space
            minified = minified.replace(/\s+/g, ' ');

            // Remove spaces around = in attributes
            minified = minified.replace(/\s*=\s*/g, '=');

            // Only remove spaces between tags when it's clearly structural
            // This targets block-level elements to avoid affecting inline content
            const blockTags = 'div|p|h1|h2|h3|h4|h5|h6|ul|ol|li|section|article|header|footer|nav|main|aside|table|thead|tbody|tfoot|tr|td|th|form|fieldset|blockquote|dl|dt|dd|figure|figcaption|address|hr|br';
            const blockTagRegex = new RegExp(`(<\\/?(${blockTags})[^>]*>)\\s+(<\\/?(${blockTags})[^>]*>)`, 'gi');
            minified = minified.replace(blockTagRegex, '$1$3');

            // Remove spaces after block-level opening tags
            const afterOpenTagRegex = new RegExp(`(<(${blockTags})[^>]*>)\\s+`, 'gi');
            minified = minified.replace(afterOpenTagRegex, '$1');

            // Remove spaces before block-level closing tags
            const beforeCloseTagRegex = new RegExp(`\\s+(<\\/(${blockTags})>)`, 'gi');
            minified = minified.replace(beforeCloseTagRegex, '$1');

            // Remove spaces before self-closing tags
            minified = minified.replace(/\s+(\/?>)/g, '$1');

            // Remove spaces after opening tags (for malformed HTML)
            minified = minified.replace(/<\s+/g, '<');

            // Restore preserved content
            preserved.forEach((content, index) => {
                minified = minified.replace(`___PRESERVED_${index}___`, content);
            });

            return minified.trim();
        }

        // CSS Minifier
        function minifyCSS(input) {
            let minified = input;

            // Remove comments
            minified = minified.replace(/\/\*[\s\S]*?\*\//g, '');

            // Remove whitespace around { } : ; ,
            minified = minified.replace(/\s*{\s*/g, '{');
            minified = minified.replace(/\s*}\s*/g, '}');
            minified = minified.replace(/\s*:\s*/g, ':');
            minified = minified.replace(/\s*;\s*/g, ';');
            minified = minified.replace(/\s*,\s*/g, ',');

            // Remove newlines and extra spaces
            minified = minified.replace(/\n/g, '');
            minified = minified.replace(/\r/g, '');
            minified = minified.replace(/\s{2,}/g, ' ');

            // Remove spaces around >
            minified = minified.replace(/\s*>\s*/g, '>');

            // Remove last semicolon in a block
            minified = minified.replace(/;}/g, '}');

            // Remove leading/trailing whitespace
            minified = minified.trim();

            // Remove spaces after opening and before closing braces
            minified = minified.replace(/{\s+/g, '{');
            minified = minified.replace(/\s+}/g, '}');

            return minified;
        }

        // JavaScript Minifier
        function minifyJS(input) {
            let minified = input;

            // Remove single-line comments (but not URLs)
            minified = minified.replace(/(?:^|\s)\/\/(?![^\n]*https?:).*$/gm, '');

            // Remove multi-line comments
            minified = minified.replace(/\/\*[\s\S]*?\*\//g, '');

            // Remove extra whitespace but preserve necessary spaces
            minified = minified.replace(/\s+/g, ' ');

            // Remove spaces around operators and punctuation
            minified = minified.replace(/\s*([{}()\[\];,.<>!&|+\-*\/%=])\s*/g, '$1');

            // Add back necessary spaces around keywords
            const keywords = ['return', 'var', 'let', 'const', 'function', 'if', 'else', 'for', 'while', 'do', 'switch', 'case', 'break', 'continue', 'new', 'typeof', 'instanceof', 'delete', 'in', 'of'];
            keywords.forEach(keyword => {
                const regex = new RegExp(`\\b${keyword}\\b`, 'g');
                minified = minified.replace(regex, ` ${keyword} `);
            });

            // Clean up excessive spaces created by keyword replacement
            minified = minified.replace(/\s{2,}/g, ' ');

            // Remove newlines
            minified = minified.replace(/\n/g, '');
            minified = minified.replace(/\r/g, '');

            // Remove spaces after { and before }
            minified = minified.replace(/{\s+/g, '{');
            minified = minified.replace(/\s+}/g, '}');

            return minified.trim();
        }

        // JSON Minifier
        function minifyJSON(input) {
            try {
                // Parse JSON to validate and then stringify without whitespace
                const parsed = JSON.parse(input);
                return JSON.stringify(parsed);
            } catch (error) {
                // If parsing fails, return error message
                throw new Error('Invalid JSON: ' + error.message);
            }
        }

        // HTML Beautifier
        function beautifyHTML(input) {
            let formatted = input;
            let indentLevel = 0;
            const indentSize = 4;
            const indent = () => ' '.repeat(indentLevel * indentSize);

            // Remove existing whitespace between tags
            formatted = formatted.replace(/>\s+</g, '><');

            // Add line breaks and indentation
            formatted = formatted.replace(/(<(?:\/)?[\w-]+(?:[^>]*)>)/g, (match) => {
                if (match.startsWith('</')) {
                    indentLevel = Math.max(0, indentLevel - 1);
                    return '\n' + indent() + match;
                } else if (match.endsWith('/>')) {
                    return '\n' + indent() + match;
                } else if (['<br>', '<hr>', '<img', '<input', '<meta', '<link'].some(tag => match.startsWith(tag))) {
                    return '\n' + indent() + match;
                } else {
                    const result = '\n' + indent() + match;
                    if (!['<script', '<style', '<pre', '<textarea'].some(tag => match.startsWith(tag))) {
                        indentLevel++;
                    } else {
                        indentLevel++;
                    }
                    return result;
                }
            });

            return formatted.trim();
        }

        // CSS Beautifier
        function beautifyCSS(input) {
            let formatted = input;
            const indentSize = 4;
            const indent = (level) => ' '.repeat(level * indentSize);

            // Add line breaks after { and }
            formatted = formatted.replace(/\{/g, ' {\n');
            formatted = formatted.replace(/\}/g, '\n}\n\n');
            formatted = formatted.replace(/;/g, ';\n');

            // Add proper indentation
            const lines = formatted.split('\n');
            let indentLevel = 0;
            const indentedLines = lines.map(line => {
                line = line.trim();
                if (!line) return '';

                if (line.includes('}')) {
                    indentLevel = Math.max(0, indentLevel - 1);
                }

                const indented = indent(indentLevel) + line;

                if (line.includes('{')) {
                    indentLevel++;
                }

                return indented;
            });

            return indentedLines.join('\n').trim();
        }

        // JavaScript Beautifier
        function beautifyJS(input) {
            let formatted = input;
            const indentSize = 4;
            const indent = (level) => ' '.repeat(level * indentSize);

            // Add line breaks after { } and ;
            formatted = formatted.replace(/\{/g, ' {\n');
            formatted = formatted.replace(/\}/g, '\n}\n');
            formatted = formatted.replace(/;/g, ';\n');

            // Add proper indentation
            const lines = formatted.split('\n');
            let indentLevel = 0;
            const indentedLines = lines.map(line => {
                line = line.trim();
                if (!line) return '';

                if (line.startsWith('}')) {
                    indentLevel = Math.max(0, indentLevel - 1);
                }

                const indented = indent(indentLevel) + line;

                if (line.endsWith('{')) {
                    indentLevel++;
                }

                return indented;
            });

            return indentedLines.join('\n').trim();
        }

        // JSON Beautifier
        function beautifyJSON(input) {
            try {
                const parsed = JSON.parse(input);
                return JSON.stringify(parsed, null, 4);
            } catch (error) {
                throw new Error('Invalid JSON: ' + error.message);
            }
        }

        // Main beautify function
        function beautify(type) {
            const input = document.getElementById(`${type}Input`).value;

            if (!input.trim()) {
                showNotification('Please enter some code!', '#ef4444');
                return;
            }

            const originalSize = input.length;
            let beautified;

            try {
                switch(type) {
                    case 'html':
                        beautified = beautifyHTML(input);
                        break;
                    case 'css':
                        beautified = beautifyCSS(input);
                        break;
                    case 'js':
                        beautified = beautifyJS(input);
                        break;
                    case 'json':
                        beautified = beautifyJSON(input);
                        break;
                }
            } catch (error) {
                showNotification(error.message, '#ef4444');
                return;
            }

            const beautifiedSize = beautified.length;
            const difference = beautifiedSize - originalSize;
            const percentChange = originalSize > 0 ? ((difference / originalSize) * 100).toFixed(2) : 0;

            // Update output and stats
            document.getElementById(`${type}Output`).value = beautified;
            document.getElementById(`${type}OriginalSize`).textContent = originalSize + ' bytes';
            document.getElementById(`${type}MinifiedSize`).textContent = beautifiedSize + ' bytes';
            document.getElementById(`${type}SavedSize`).textContent = (difference >= 0 ? '+' : '') + percentChange + '%';

            // Apply syntax highlighting
            applySyntaxHighlighting(type, beautified);

            showNotification(`${type.toUpperCase()} beautified successfully!`, '#8b5cf6');
        }

        // Main minify function
        function minify(type) {
            const input = document.getElementById(`${type}Input`).value;

            if (!input.trim()) {
                showNotification('Please enter some code!', '#ef4444');
                return;
            }

            const originalSize = input.length;
            let minified;

            // Apply appropriate minifier
            try {
                switch(type) {
                    case 'html':
                        minified = minifyHTML(input);
                        break;
                    case 'css':
                        minified = minifyCSS(input);
                        break;
                    case 'js':
                        minified = minifyJS(input);
                        break;
                    case 'json':
                        minified = minifyJSON(input);
                        break;
                }
            } catch (error) {
                showNotification(error.message, '#ef4444');
                return;
            }

            const minifiedSize = minified.length;
            const saved = originalSize > 0 ? ((originalSize - minifiedSize) / originalSize * 100).toFixed(2) : 0;

            // Update output and stats
            document.getElementById(`${type}Output`).value = minified;
            document.getElementById(`${type}OriginalSize`).textContent = originalSize + ' bytes';
            document.getElementById(`${type}MinifiedSize`).textContent = minifiedSize + ' bytes';
            document.getElementById(`${type}SavedSize`).textContent = saved + '%';

            // Apply syntax highlighting
            applySyntaxHighlighting(type, minified);

            showNotification(`${type.toUpperCase()} minified successfully! Saved ${saved}%`, '#10b981');
        }

        // Apply syntax highlighting to output
        function applySyntaxHighlighting(type, code) {
            const languageMap = {
                'html': 'markup',
                'css': 'css',
                'js': 'javascript',
                'json': 'json'
            };

            const language = languageMap[type];
            const outputTextarea = document.getElementById(`${type}Output`);

            // Escape HTML for proper display
            const escapedCode = code
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;');

            // Apply Prism highlighting
            const highlighted = Prism.highlight(code, Prism.languages[language], language);

            // For now, just keep the textarea - we can enhance this later with a better view
            // This is a lightweight implementation
        }

        // Copy to clipboard
        async function copyOutput(type) {
            let output;
            if (type === 'base64Text') {
                output = document.getElementById('base64TextOutput');
            } else if (type === 'base64Image') {
                output = document.getElementById('base64ImageInput');
            } else {
                output = document.getElementById(`${type}Output`);
            }

            if (!output.value.trim()) {
                showNotification('Nothing to copy!', '#ef4444');
                return;
            }

            try {
                // Modern Clipboard API
                await navigator.clipboard.writeText(output.value);
                showNotification('Copied to clipboard!', '#10b981');
            } catch (err) {
                // Fallback for older browsers
                output.select();
                document.execCommand('copy');
                showNotification('Copied to clipboard!', '#10b981');
            }
        }

        // Download file
        function downloadFile(type) {
            const output = document.getElementById(`${type}Output`).value;

            if (!output.trim()) {
                showNotification('Nothing to download!', '#ef4444');
                return;
            }

            const blob = new Blob([output], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');

            const extensions = { html: 'html', css: 'css', js: 'js', json: 'json' };
            a.href = url;
            a.download = `minified.min.${extensions[type]}`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);

            showNotification('File downloaded successfully!', '#10b981');
        }

        // Clear all fields
        function clearAll(type) {
            if (type === 'base64Text') {
                document.getElementById('base64TextInput').value = '';
                document.getElementById('base64TextOutput').value = '';
            } else if (type === 'base64Image') {
                document.getElementById('base64ImageInput').value = '';
                document.getElementById('imagePreview').src = '';
                document.getElementById('imagePreviewContainer').style.display = 'none';
                document.getElementById('base64Size').textContent = '0';
                document.getElementById('imageType').textContent = '-';
            } else {
                document.getElementById(`${type}Input`).value = '';
                document.getElementById(`${type}Output`).value = '';
                document.getElementById(`${type}OriginalSize`).textContent = '0';
                document.getElementById(`${type}MinifiedSize`).textContent = '0';
                document.getElementById(`${type}SavedSize`).textContent = '0%';
            }

            showNotification('Cleared all fields!', '#10b981');
        }

        // File upload handling
        function handleFileSelect(event, type) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById(`${type}Input`).value = e.target.result;
                showNotification(`File "${file.name}" loaded successfully!`, '#10b981');
            };
            reader.readAsText(file);
        }

        // Drag and drop setup
        function setupDragAndDrop() {
            ['html', 'css', 'js', 'json'].forEach(type => {
                const uploadArea = document.getElementById(`${type}UploadArea`);

                uploadArea.addEventListener('click', () => {
                    document.getElementById(`${type}FileInput`).click();
                });

                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });

                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('dragover');
                });

                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');

                    const file = e.dataTransfer.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (evt) => {
                            document.getElementById(`${type}Input`).value = evt.target.result;
                            showNotification(`File "${file.name}" loaded successfully!`, '#10b981');
                        };
                        reader.readAsText(file);
                    }
                });
            });

            // Base64 Image drag and drop
            const base64ImageUploadArea = document.getElementById('base64ImageUploadArea');
            if (base64ImageUploadArea) {
                base64ImageUploadArea.addEventListener('click', () => {
                    document.getElementById('base64ImageFileInput').click();
                });

                base64ImageUploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    base64ImageUploadArea.classList.add('dragover');
                });

                base64ImageUploadArea.addEventListener('dragleave', () => {
                    base64ImageUploadArea.classList.remove('dragover');
                });

                base64ImageUploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    base64ImageUploadArea.classList.remove('dragover');

                    const file = e.dataTransfer.files[0];
                    if (file && file.type.startsWith('image/')) {
                        handleImageFile(file);
                    } else {
                        showNotification('Please drop a valid image file!', '#ef4444');
                    }
                });
            }
        }

        // Show notification
        function showNotification(message, color) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.background = color;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Base64 Text Encoding
        function encodeBase64Text() {
            const input = document.getElementById('base64TextInput').value;

            if (!input.trim()) {
                showNotification('Please enter some text!', '#ef4444');
                return;
            }

            try {
                const encoded = btoa(unescape(encodeURIComponent(input)));
                document.getElementById('base64TextOutput').value = encoded;
                showNotification('Text encoded to Base64 successfully!', '#10b981');
            } catch (error) {
                showNotification('Error encoding text: ' + error.message, '#ef4444');
            }
        }

        // Base64 Text Decoding
        function decodeBase64Text() {
            const input = document.getElementById('base64TextInput').value;

            if (!input.trim()) {
                showNotification('Please enter a Base64 string!', '#ef4444');
                return;
            }

            try {
                const decoded = decodeURIComponent(escape(atob(input)));
                document.getElementById('base64TextOutput').value = decoded;
                showNotification('Base64 decoded to text successfully!', '#10b981');
            } catch (error) {
                showNotification('Error decoding Base64: ' + error.message, '#ef4444');
            }
        }

        // Handle image file selection
        function handleImageSelect(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                handleImageFile(file);
            } else {
                showNotification('Please select a valid image file!', '#ef4444');
            }
        }

        // Process image file
        function handleImageFile(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                const base64String = e.target.result;
                document.getElementById('base64ImageInput').value = base64String;

                // Show preview
                const preview = document.getElementById('imagePreview');
                preview.src = base64String;
                document.getElementById('imagePreviewContainer').style.display = 'block';

                // Update stats
                document.getElementById('base64Size').textContent = (base64String.length / 1024).toFixed(2) + ' KB';
                document.getElementById('imageType').textContent = file.type.split('/')[1].toUpperCase();

                showNotification(`Image "${file.name}" encoded to Base64!`, '#10b981');
            };
            reader.readAsDataURL(file);
        }

        // Decode Base64 to Image
        function decodeBase64Image() {
            const base64Input = document.getElementById('base64ImageInput').value.trim();

            if (!base64Input) {
                showNotification('Please enter a Base64 image string!', '#ef4444');
                return;
            }

            try {
                // Show preview
                const preview = document.getElementById('imagePreview');
                preview.src = base64Input;
                document.getElementById('imagePreviewContainer').style.display = 'block';

                // Extract image type from data URL
                const match = base64Input.match(/^data:image\/(\w+);base64,/);
                const imageType = match ? match[1].toUpperCase() : 'Unknown';

                // Update stats
                document.getElementById('base64Size').textContent = (base64Input.length / 1024).toFixed(2) + ' KB';
                document.getElementById('imageType').textContent = imageType;

                showNotification('Base64 decoded to image successfully!', '#10b981');
            } catch (error) {
                showNotification('Error decoding Base64 image: ' + error.message, '#ef4444');
            }
        }

        // Download Base64 Image
        function downloadBase64Image() {
            const base64Input = document.getElementById('base64ImageInput').value.trim();

            if (!base64Input) {
                showNotification('Nothing to download!', '#ef4444');
                return;
            }

            try {
                // Extract MIME type and base64 data
                const match = base64Input.match(/^data:(image\/\w+);base64,(.+)$/);
                if (!match) {
                    showNotification('Invalid Base64 image format!', '#ef4444');
                    return;
                }

                const mimeType = match[1];
                const extension = mimeType.split('/')[1];

                // Create download link
                const link = document.createElement('a');
                link.href = base64Input;
                link.download = `image.${extension}`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                showNotification('Image downloaded successfully!', '#10b981');
            } catch (error) {
                showNotification('Error downloading image: ' + error.message, '#ef4444');
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl/Cmd + Enter to minify
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                if (currentTab !== 'base64') {
                    minify(currentTab);
                }
            }

            // Ctrl/Cmd + K to clear
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                if (currentTab === 'base64') {
                    clearAll('base64Text');
                    clearAll('base64Image');
                } else {
                    clearAll(currentTab);
                }
            }
        });

        // Load sample code
        function loadSampleCode() {
            // Sample HTML
            document.getElementById('htmlInput').value = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sample Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }

        h1 {
            color: #333;
        }
    </style>
</head>
<body>
    <!-- This is a comment -->
    <h1>Hello World</h1>

    <p>This is a sample HTML document with multiple lines.</p>

    <div class="container">
        <ul>
            <li>Item 1</li>
            <li>Item 2</li>
            <li>Item 3</li>
        </ul>
    </div>

    <script>
        console.log('Hello from JavaScript');
    <\/script>
</body>
</html>`;

            // Sample CSS
            document.getElementById('cssInput').value = `/* Main Styles */
body {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f5f5f5;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

/* Header Styles */
h1, h2, h3 {
    color: #333;
    font-weight: 600;
}

h1 {
    font-size: 2.5em;
    margin-bottom: 20px;
}

/* Button Styles */
.button {
    display: inline-block;
    padding: 12px 24px;
    background-color: #007bff;
    color: white;
    border-radius: 4px;
    text-decoration: none;
}

.button:hover {
    background-color: #0056b3;
}`;

            // Sample JavaScript
            document.getElementById('jsInput').value = `// Sample JavaScript Code
function calculateSum(a, b) {
    // Add two numbers
    return a + b;
}

// Array manipulation
const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map(num => num * 2);

// Object example
const user = {
    name: 'John Doe',
    age: 30,
    email: 'john@example.com'
};

// Event listener
document.addEventListener('DOMContentLoaded', function() {
    console.log('Page loaded successfully!');

    // Get element
    const button = document.querySelector('.button');

    // Add click handler
    if (button) {
        button.addEventListener('click', function(e) {
            e.preventDefault();
            alert('Button clicked!');
        });
    }
});

// Async function example
async function fetchData(url) {
    try {
        const response = await fetch(url);
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Error fetching data:', error);
    }
}`;

            // Sample JSON
            document.getElementById('jsonInput').value = `{
    "name": "John Doe",
    "age": 30,
    "email": "john.doe@example.com",
    "address": {
        "street": "123 Main Street",
        "city": "New York",
        "state": "NY",
        "zipCode": "10001",
        "country": "USA"
    },
    "phoneNumbers": [
        {
            "type": "home",
            "number": "555-1234"
        },
        {
            "type": "mobile",
            "number": "555-5678"
        }
    ],
    "hobbies": [
        "reading",
        "traveling",
        "photography",
        "coding"
    ],
    "employment": {
        "company": "Tech Corp",
        "position": "Software Engineer",
        "yearsOfExperience": 5,
        "skills": [
            "JavaScript",
            "Python",
            "React",
            "Node.js"
        ]
    },
    "isActive": true,
    "lastLogin": "2024-01-15T10:30:00Z"
}`;
        }
    </script>
</body>
</html>
